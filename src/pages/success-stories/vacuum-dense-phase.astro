---
import BaseLayout from '../../layouts/BaseLayout.astro';

const results = [
  { stat: 'Turnkey', label: 'Solution', desc: 'Complete multi-stage system delivered as a fully engineered package — from bulk bag unloading through mixer delivery.' },
  { stat: 'Precise', label: 'Batching', desc: 'Gain-in-weight batching ensures accurate, repeatable material dosing for consistent mix ratios batch after batch.' },
  { stat: 'Dual Mixer', label: 'Feed', desc: 'Gravity divert valve enables automated routing to either of two mixers, maximizing production throughput.' },
  { stat: 'Automated', label: 'Controls', desc: 'PLC-based system with touchscreen HMI provides full process monitoring from unloading through final discharge.' },
];
---

<BaseLayout title="Vacuum Dense Phase Conveying for Ceramics Manufacturing — Success Story" description="How Zephyr Equipment engineered a multi-stage vacuum dense phase conveying system with bulk bag unloading, gain-in-weight batching, and dual mixer delivery for a ceramics manufacturer.">

  <!-- ===== HERO ===== -->
  <section class="cs-hero">
    <div class="cs-hero-bg"></div>
    <div class="cs-hero-overlay"></div>
    <div class="container cs-hero-content">
      <div class="cs-hero-grid">
        <div class="cs-hero-text">
          <a href="/success-stories" class="cs-back">
            <svg width="16" height="16" viewBox="0 0 20 20" fill="none">
              <path d="M16 10H4M4 10L9 5M4 10L9 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            All Projects
          </a>
          <span class="label" style="color: var(--zephyr-orange);">Ceramics</span>
          <h1 class="display-lg" style="color: white; margin-top: 0.5rem;">Vacuum Dense Phase<br /><span style="color: var(--zephyr-orange);">Conveying System</span></h1>
          <p class="accent-text" style="color: var(--steel-300); margin-top: 0.5rem;">Bulk bag unloading, gain-in-weight batching & dual mixer delivery for ceramics production</p>
          <div class="cs-hero-meta">
            <div class="cs-meta-item">
              <span class="cs-meta-label">Client</span>
              <span class="cs-meta-value">Ceramics Manufacturer</span>
            </div>
            <div class="cs-meta-item">
              <span class="cs-meta-label">Industry</span>
              <span class="cs-meta-value">Ceramics Manufacturing</span>
            </div>
            <div class="cs-meta-item">
              <span class="cs-meta-label">Technology</span>
              <span class="cs-meta-value">Vacuum Dense Phase Conveying</span>
            </div>
          </div>
        </div>
        <div class="cs-hero-render" id="heroRenderTrigger">
          <img src="/images/vac-dense/vac-dense-phase-3d.png" alt="Vacuum dense phase conveying system 3D rendering" />
          <div class="cs-hero-render-expand">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="15 3 21 3 21 9"/>
              <polyline points="9 21 3 21 3 15"/>
              <line x1="21" y1="3" x2="14" y2="10"/>
              <line x1="3" y1="21" x2="10" y2="14"/>
            </svg>
            Click to Expand
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== HERO IMAGE ===== -->
  <section class="cs-hero-image">
    <a href="/images/vac-dense/vacdense-1.jpg" target="_blank" rel="noopener noreferrer" class="cs-hero-image-link">
      <img src="/images/vac-dense/vacdense-2.jpg" alt="Vacuum dense phase conveying system installation" />
      <div class="cs-hero-image-expand">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 3 21 3 21 9"/>
          <polyline points="9 21 3 21 3 15"/>
          <line x1="21" y1="3" x2="14" y2="10"/>
          <line x1="3" y1="21" x2="10" y2="14"/>
        </svg>
        View Full Image
      </div>
    </a>
  </section>

  <!-- ===== INTRO ===== -->
  <section class="cs-section">
    <div class="container cs-container">
      <div class="cs-card reveal">
        <p class="cs-intro-text">
          A ceramics manufacturer needed an automated, dust-free system to unload bulk raw materials, batch them by weight, and deliver precise charges to one of two production mixers. Zephyr engineered a multi-stage vacuum dense phase conveying system that takes material from bulk bag unloading through gain-in-weight batching, portable bin transfer, and a second conveying stage to a 75 cu. ft. vacuum receiver — discharging through an airlock and gravity divert valve to feed either mixer on demand.
        </p>
      </div>
    </div>
  </section>

  <!-- ===== THE CHALLENGE ===== -->
  <section class="cs-section">
    <div class="container cs-container">
      <div class="cs-section-header reveal">
        <span class="label" style="color: var(--zephyr-orange);">01 — The Challenge</span>
        <h2 class="display-md" style="margin-top: 0.5rem;">Precise Batching & Dual Mixer Delivery</h2>
      </div>
      <div class="cs-body reveal">
        <p>Ceramics production demands exact raw material ratios — any inconsistency in batching directly affects the quality of the finished product. The facility needed to replace manual material handling with an automated system that could accurately batch materials by weight and reliably feed two separate production mixers.</p>
        <p><strong>The facility needed to:</strong></p>
        <ul>
          <li>Automate bulk bag unloading and raw material introduction into the process.</li>
          <li>Achieve repeatable gain-in-weight batching for consistent mix ratios.</li>
          <li>Transfer batched material to a second conveying stage via portable bins.</li>
          <li>Deliver material to a 75 cu. ft. vacuum receiver and route it to one of two mixers.</li>
          <li>Eliminate dust exposure and minimize manual handling throughout the process.</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ===== THE SOLUTION ===== -->
  <section class="cs-section cs-solution-section">
    <div class="container cs-container">
      <div class="cs-section-header reveal">
        <span class="label" style="color: var(--zephyr-orange);">02 — The Solution</span>
        <h2 class="display-md" style="margin-top: 0.5rem;">Multi-Stage Conveying & Batching</h2>
      </div>
      <p class="cs-body-text reveal">Zephyr engineered a complete multi-stage system to handle the full material flow from bulk bag to mixer:</p>

      <div class="cs-process-flow">
        <div class="cs-process-step reveal" data-delay="0">
          <div class="cs-process-num">01</div>
          <div class="cs-process-content">
            <h3 class="cs-process-title">Bulk Bag Unloading</h3>
            <p>Raw materials are introduced through a bag dump station with integrated dust containment, feeding material into the first vacuum dense phase conveying system.</p>
          </div>
        </div>
        <div class="cs-process-connector"></div>
        <div class="cs-process-step reveal" data-delay="1">
          <div class="cs-process-num">02</div>
          <div class="cs-process-content">
            <h3 class="cs-process-title">Dense Phase Conveying to Gain-in-Weight Batching</h3>
            <p>The first vacuum dense phase system conveys material to a gain-in-weight batching station, where precise batch weights are accumulated for consistent mix ratios.</p>
          </div>
        </div>
        <div class="cs-process-connector"></div>
        <div class="cs-process-step reveal" data-delay="2">
          <div class="cs-process-num">03</div>
          <div class="cs-process-content">
            <h3 class="cs-process-title">Portable Bin Transfer</h3>
            <p>Batched material is discharged into a portable bin, which is then positioned over an unloading station that feeds the second stage of the conveying system.</p>
          </div>
        </div>
        <div class="cs-process-connector"></div>
        <div class="cs-process-step reveal" data-delay="3">
          <div class="cs-process-num">04</div>
          <div class="cs-process-content">
            <h3 class="cs-process-title">Second Stage Conveying</h3>
            <p>A second vacuum dense phase conveying system transports the batched material from the bin unloading station to a 75 cu. ft. vacuum receiver.</p>
          </div>
        </div>
        <div class="cs-process-connector"></div>
        <div class="cs-process-step reveal" data-delay="4">
          <div class="cs-process-num">05</div>
          <div class="cs-process-content">
            <h3 class="cs-process-title">Airlock Discharge & Dual Mixer Feed</h3>
            <p>Material discharges from the vacuum receiver through a rotary airlock and gravity divert valve, routing the batch to one of two production mixers on demand.</p>
          </div>
        </div>
      </div>

      <div class="cs-controls-note reveal">
        <p>The entire multi-stage process is monitored and controlled by a PLC-based system with full color touchscreen HMIs, providing operators with real-time visibility into system status, batch weights, and container levels from unloading through mixer delivery.</p>
      </div>
    </div>
  </section>

  <!-- ===== THE RESULT ===== -->
  <section class="cs-section">
    <div class="container cs-container">
      <div class="cs-section-header reveal">
        <span class="label" style="color: var(--zephyr-orange);">03 — The Result</span>
        <h2 class="display-md" style="margin-top: 0.5rem;">Measurable Impact</h2>
      </div>
      <p class="cs-body-text reveal">The system delivered immediate operational improvements across the facility:</p>

      <div class="cs-results-grid">
        {results.map((r, i) => (
          <div class="cs-result-card reveal" data-delay={i}>
            <div class="cs-result-stat">{r.stat}</div>
            <div class="cs-result-label">{r.label}</div>
            <p class="cs-result-desc">{r.desc}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- ===== PARTNERSHIP ===== -->
  <section class="cs-section">
    <div class="container cs-container">
      <div class="cs-card cs-card--dark reveal">
        <h3 class="display-md" style="color: white; margin-bottom: 1rem;">Engineered for Your Process</h3>
        <p style="color: var(--steel-300); font-weight: 300; line-height: 1.7;">
          Every system is custom engineered to match the unique requirements of each facility. From material characteristics and batch sizes to the number of destination points and mixer configurations, Zephyr designs a solution that fits your process — not the other way around. Our in-house engineering team works directly with your operations group from concept through commissioning.
        </p>
      </div>
    </div>
  </section>

  <!-- ===== PHOTO GALLERY ===== -->
  <section class="cs-section" style="background: white; padding: 3rem 0;">
    <div class="container cs-container" style="max-width: 1200px;">
      <div class="cs-section-header reveal">
        <span class="label" style="color: var(--zephyr-orange);">Gallery</span>
        <h2 class="display-md" style="margin-top: 0.5rem;">Project Photos</h2>
      </div>
      <div class="cs-gallery-rotator reveal">
        <div class="cs-gallery-nav">
          <button class="cs-gallery-btn" id="galleryPrev" disabled>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
          </button>
          <button class="cs-gallery-btn" id="galleryNext">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 6 15 12 9 18"/></svg>
          </button>
        </div>
        <div class="cs-gallery-wrapper">
          <div class="cs-gallery-track" id="galleryTrack">
            <div class="cs-gallery-slide" data-src="/images/vac-dense/vacdense-1.jpg">
              <img src="/images/vac-dense/vacdense-1.jpg" alt="System overview" />
            </div>
            <div class="cs-gallery-slide" data-src="/images/vac-dense/vacdense-2.jpg">
              <img src="/images/vac-dense/vacdense-2.jpg" alt="System detail" />
            </div>
            <div class="cs-gallery-slide" data-src="/images/vac-dense/vacdense-3.jpg">
              <img src="/images/vac-dense/vacdense-3.jpg" alt="Installation view" />
            </div>
            <div class="cs-gallery-slide" data-src="/images/vac-dense/vacdense-4.gif">
              <img src="/images/vac-dense/vacdense-4.gif" alt="System in operation" />
            </div>
            <div class="cs-gallery-slide" data-src="/images/vac-dense/vacdense-5.png">
              <img src="/images/vac-dense/vacdense-5.png" alt="System detail view" />
            </div>
            <div class="cs-gallery-slide" data-src="/images/vac-dense/vac-dense-phase-3d.png">
              <img src="/images/vac-dense/vac-dense-phase-3d.png" alt="3D system rendering" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Image Modal -->
  <div id="csImgModal" class="cs-img-modal">
    <div class="cs-img-modal-backdrop"></div>
    <div class="cs-img-modal-content">
      <button id="csImgClose" class="cs-img-modal-close">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
      <img id="csModalImg" alt="Gallery image" />
    </div>
  </div>

  <!-- ===== CTA ===== -->
  <section class="cs-cta reveal">
    <div class="container" style="text-align: center;">
      <span class="label" style="color: var(--zephyr-orange);">Start Your Project</span>
      <h2 class="display-lg" style="color: white; margin-top: 0.75rem;">Let's Engineer<br />Your Solution</h2>
      <p style="color: var(--steel-300); max-width: 500px; margin: 1rem auto 2rem; font-weight: 300; line-height: 1.7;">
        Tell us about your material handling challenge and we'll design a conveying and batching system tailored to your production process.
      </p>
      <a href="/contact" class="btn btn--primary">Get a Quote</a>
    </div>
  </section>

</BaseLayout>

<style>
  /* ===== HERO ===== */
  .cs-hero {
    position: relative;
    padding: 10rem 2rem 4rem;
    overflow: hidden;
  }

  .cs-hero-bg {
    position: absolute; inset: 0;
    background: var(--steel-900);
  }

  .cs-hero-overlay {
    position: absolute; inset: 0;
    background:
      radial-gradient(ellipse at 20% 80%, rgba(232, 97, 45, 0.08) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 20%, rgba(52, 73, 94, 0.15) 0%, transparent 50%);
  }

  .cs-hero-content {
    position: relative;
    z-index: 1;
  }

  .cs-hero-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: center;
  }

  .cs-hero-render {
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: visible;
    position: relative;
    cursor: pointer;
  }

  .cs-hero-render img {
    width: 250%;
    max-width: none;
    height: auto;
    object-fit: contain;
    filter: drop-shadow(0 8px 40px rgba(0,0,0,0.3));
  }

  .cs-hero-render-expand {
    position: absolute;
    bottom: 0.5rem;
    right: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.4rem 0.75rem;
    background: rgba(0,0,0,0.5);
    backdrop-filter: blur(4px);
    border-radius: 2px;
    font-family: var(--font-display);
    font-size: 0.65rem;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: white;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .cs-hero-render:hover .cs-hero-render-expand {
    opacity: 1;
  }

  @media (max-width: 768px) {
    .cs-hero-grid {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    .cs-hero-render { display: none; }
  }

  .cs-back {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-family: var(--font-display);
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--steel-400);
    text-decoration: none;
    margin-bottom: 1.5rem;
    transition: color 0.2s ease;
  }
  .cs-back:hover { color: var(--zephyr-orange); }

  /* ===== HERO IMAGE ===== */
  .cs-hero-image {
    width: 100%;
    height: 520px;
    overflow: hidden;
  }

  .cs-hero-image-link {
    display: block;
    width: 100%;
    height: 100%;
    position: relative;
    cursor: pointer;
  }

  .cs-hero-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .cs-hero-image-expand {
    position: absolute;
    bottom: 1rem;
    right: 1rem;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.5rem 1rem;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(4px);
    color: white;
    font-family: var(--font-display);
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    border-radius: 2px;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .cs-hero-image-link:hover .cs-hero-image-expand {
    opacity: 1;
  }

  /* ===== TIGHTER SECTIONS ===== */
  .cs-section {
    padding: 1.5rem 0;
  }

  .cs-hero-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 2.5rem;
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(255,255,255,0.08);
  }

  .cs-meta-label {
    display: block;
    font-family: var(--font-display);
    font-weight: 600;
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--zephyr-orange);
    margin-bottom: 0.25rem;
  }

  .cs-meta-value {
    font-size: 0.9rem;
    color: var(--steel-200);
    font-weight: 300;
  }

  /* ===== CONTENT ===== */
  .cs-container {
    max-width: 900px;
  }

  .cs-card {
    background: white;
    padding: 2.5rem;
    border-left: 4px solid var(--zephyr-orange);
    box-shadow: 0 4px 24px rgba(0,0,0,0.04);
  }

  .cs-card--dark {
    background: var(--steel-900);
    border-left-color: var(--zephyr-orange);
  }

  .cs-intro-text {
    font-size: 1.1rem;
    line-height: 1.8;
    color: var(--steel-700);
    font-weight: 300;
  }

  .cs-section-header {
    margin-bottom: 1.5rem;
  }

  .cs-body p, .cs-body-text {
    font-weight: 300;
    color: var(--steel-600);
    line-height: 1.75;
    font-size: 0.95rem;
    margin-bottom: 1rem;
  }

  .cs-body strong {
    color: var(--steel-800);
    font-weight: 600;
  }

  .cs-body ul {
    list-style: none;
    padding: 0;
    margin-bottom: 1rem;
  }

  .cs-body ul li {
    position: relative;
    padding-left: 1.5rem;
    font-weight: 300;
    color: var(--steel-600);
    line-height: 1.75;
    font-size: 0.95rem;
    margin-bottom: 0.5rem;
  }

  .cs-body ul li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.55rem;
    width: 8px;
    height: 8px;
    background: var(--zephyr-orange);
    transform: rotate(45deg);
  }

  /* ===== SOLUTION - PROCESS FLOW ===== */
  .cs-solution-section {
    background: var(--steel-50);
  }

  .cs-process-flow {
    margin-top: 1.5rem;
  }

  .cs-process-step {
    display: flex;
    gap: 1.5rem;
    padding: 1.5rem 2rem;
    background: white;
    border-left: 3px solid transparent;
    transition: all 0.3s ease;
  }

  .cs-process-step:hover {
    border-left-color: var(--zephyr-orange);
    background: var(--steel-800);
  }

  .cs-process-num {
    font-family: var(--font-display);
    font-weight: 300;
    font-size: 1.8rem;
    color: var(--steel-200);
    line-height: 1;
    min-width: 2.5rem;
    transition: color 0.3s ease;
  }

  .cs-process-step:hover .cs-process-num {
    color: var(--zephyr-orange);
  }

  .cs-process-title {
    font-family: var(--font-display);
    font-weight: 700;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 0.02em;
    color: var(--steel-800);
    margin-bottom: 0.5rem;
    transition: color 0.3s ease;
  }

  .cs-process-step:hover .cs-process-title {
    color: white;
  }

  .cs-process-content p {
    font-weight: 300;
    color: var(--steel-500);
    line-height: 1.7;
    font-size: 0.88rem;
    margin: 0;
    transition: color 0.3s ease;
  }

  .cs-process-step:hover .cs-process-content p {
    color: var(--steel-300);
  }

  .cs-process-connector {
    width: 2px;
    height: 1.25rem;
    background: var(--steel-200);
    margin-left: 3.25rem;
  }

  .cs-controls-note {
    margin-top: 1.5rem;
    padding: 1.5rem 2rem;
    background: white;
    border-left: 4px solid var(--zephyr-orange);
  }

  .cs-controls-note p {
    font-weight: 300;
    color: var(--steel-600);
    line-height: 1.7;
    font-size: 0.9rem;
    margin: 0;
  }

  /* ===== RESULTS ===== */
  .cs-results-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5rem;
    margin-top: 1.5rem;
  }

  .cs-result-card {
    padding: 1.5rem;
    background: white;
    border-top: 3px solid transparent;
    transition: all 0.3s ease;
  }
  .cs-result-card:hover {
    border-top-color: var(--zephyr-orange);
    box-shadow: 0 8px 32px rgba(0,0,0,0.06);
    transform: translateY(-2px);
  }

  .cs-result-stat {
    font-family: var(--font-display);
    font-weight: 800;
    font-size: 1.4rem;
    text-transform: uppercase;
    color: var(--zephyr-orange);
    line-height: 1;
  }

  .cs-result-label {
    font-family: var(--font-display);
    font-weight: 600;
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--steel-400);
    margin-top: 0.25rem;
    margin-bottom: 0.75rem;
  }

  .cs-result-desc {
    font-weight: 300;
    color: var(--steel-500);
    line-height: 1.65;
    font-size: 0.82rem;
  }

  /* ===== CTA ===== */
  .cs-cta {
    background: var(--steel-800);
    padding: 4rem 2rem;
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 768px) {
    .cs-hero { padding: 8rem 2rem 3rem; }
    .cs-section { padding: 1.25rem 0; }
    .cs-hero-image { height: 280px; }
    .cs-hero-meta { gap: 1.5rem; }
    .cs-results-grid { grid-template-columns: 1fr 1fr; }
    .cs-card { padding: 1.5rem; }
    .cs-process-step { padding: 1.25rem 1.5rem; }
  }

  @media (max-width: 480px) {
    .cs-results-grid { grid-template-columns: 1fr; }
  }

  /* ===== PHOTO GALLERY ROTATOR ===== */
  .cs-gallery-rotator {
    position: relative;
  }

  .cs-gallery-nav {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
    margin-bottom: 1rem;
  }

  .cs-gallery-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border: 1px solid var(--steel-200);
    border-radius: 50%;
    background: white;
    color: var(--steel-500);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .cs-gallery-btn:hover {
    border-color: var(--zephyr-orange);
    color: var(--zephyr-orange);
  }

  .cs-gallery-btn:disabled {
    opacity: 0.3;
    cursor: default;
    border-color: var(--steel-200);
    color: var(--steel-300);
  }

  .cs-gallery-wrapper {
    overflow: hidden;
    border-radius: 6px;
  }

  .cs-gallery-track {
    display: flex;
    gap: 1rem;
    transition: transform 0.4s ease;
  }

  .cs-gallery-slide {
    flex: 0 0 calc(50% - 0.5rem);
    aspect-ratio: 16/9;
    border-radius: 6px;
    overflow: hidden;
    cursor: pointer;
    position: relative;
  }

  .cs-gallery-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .cs-gallery-slide:hover img {
    transform: scale(1.03);
  }

  @media (max-width: 768px) {
    .cs-gallery-slide {
      flex: 0 0 100%;
    }
  }

  /* ===== IMAGE MODAL ===== */
  .cs-img-modal {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 9999;
    align-items: center;
    justify-content: center;
  }

  .cs-img-modal.active {
    display: flex;
  }

  .cs-img-modal-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.85);
  }

  .cs-img-modal-content {
    position: relative;
    max-width: 90vw;
    max-height: 85vh;
  }

  .cs-img-modal-content img {
    max-width: 90vw;
    max-height: 85vh;
    border-radius: 4px;
    object-fit: contain;
  }

  .cs-img-modal-close {
    position: absolute;
    top: -2.5rem;
    right: 0;
    background: none;
    border: none;
    color: white;
    cursor: pointer;
    opacity: 0.7;
    transition: opacity 0.2s ease;
  }

  .cs-img-modal-close:hover {
    opacity: 1;
  }
</style>

<script>
  // Gallery rotator
  const track = document.getElementById('galleryTrack');
  const prevBtn = document.getElementById('galleryPrev');
  const nextBtn = document.getElementById('galleryNext');

  if (track && prevBtn && nextBtn) {
    let offset = 0;
    const slides = track.querySelectorAll('.cs-gallery-slide');
    const isMobile = window.innerWidth <= 768;
    const visible = isMobile ? 1 : 2;
    const maxOffset = Math.max(0, slides.length - visible);

    function update() {
      const gap = 16;
      const itemWidth = (track!.parentElement!.clientWidth - gap * (visible - 1)) / visible;
      track!.style.transform = `translateX(-${offset * (itemWidth + gap)}px)`;
      prevBtn!.disabled = offset === 0;
      nextBtn!.disabled = offset >= maxOffset;
    }

    prevBtn.addEventListener('click', () => { if (offset > 0) { offset--; update(); } });
    nextBtn.addEventListener('click', () => { if (offset < maxOffset) { offset++; update(); } });
    update();
    window.addEventListener('resize', update);

    // Hero render click to expand
    const heroRender = document.getElementById('heroRenderTrigger');
    const heroRenderImg = heroRender?.querySelector('img') as HTMLImageElement;

    // Click to expand
    const modal = document.getElementById('csImgModal');
    const modalImg = document.getElementById('csModalImg') as HTMLImageElement;
    const closeBtn = document.getElementById('csImgClose');
    const backdrop = modal?.querySelector('.cs-img-modal-backdrop');

    slides.forEach(slide => {
      slide.addEventListener('click', () => {
        const img = slide.querySelector('img') as HTMLImageElement;
        modalImg.src = img.src;
        modal?.classList.add('active');
        document.body.style.overflow = 'hidden';
      });
    });

    heroRender?.addEventListener('click', () => {
      modalImg.src = heroRenderImg.src;
      modal?.classList.add('active');
      document.body.style.overflow = 'hidden';
    });

    function closeModal() {
      modal?.classList.remove('active');
      document.body.style.overflow = '';
    }

    closeBtn?.addEventListener('click', closeModal);
    backdrop?.addEventListener('click', closeModal);
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modal?.classList.contains('active')) closeModal();
    });
  }
</script>
